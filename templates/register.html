{% extends "base.html" %}

{% block title %}新規登録 - コエカルテ{% endblock %}

{% block content %}
  <div class="dashboard-card">
    <h1>新規登録</h1>

    {# ✅ エラーメッセージを表示（flash用） #}
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div style="color: red; font-weight: bold; margin-bottom: 20px;">
          {% for message in messages %}
            {{ message }}
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST" action="/register" style="width: 100%; max-width: 500px; z-index: 10;">
      <div>
        <label for="username">ユーザー名:</label><br>
        <input type="text" name="username" id="username">
      </div>

      <div>
        <label for="email">メールアドレス:</label><br>
        <input type="email" name="email" id="email">
      </div>

      <div>
        <label for="password">パスワード:</label><br>
        <input type="password" name="password" id="password">
      </div>

      <p>生年月日:<br>
        <select name="birth_year">
          {% for y in range(1950, 2026) %}
          <option value="{{ y }}">{{ y }}年</option>
          {% endfor %}
        </select>
        <select name="birth_month">
          {% for m in range(1, 13) %}
          <option value="{{ m }}">{{ m }}月</option>
          {% endfor %}
        </select>
        <select name="birth_day">
          {% for d in range(1, 32) %}
          <option value="{{ d }}">{{ d }}日</option>
          {% endfor %}
        </select>
      </p>

      <p>お住まいの都道府県:<br>
        <select name="prefecture" required>
          <option value="">選択してください</option>
          {% for pref in [
            "北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県",
            "群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県",
            "山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府",
            "兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県",
            "香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県",
            "鹿児島県","沖縄県"
          ] %}
            <option value="{{ pref }}">{{ pref }}</option>
          {% endfor %}
        </select>
      </p>

      <p>性別:<br>
        <select name="gender">
          <option value="男性">男性</option>
          <option value="女性">女性</option>
          <option value="その他">その他</option>
          <option value="答えたくない">答えたくない</option>
        </select>
      </p>

      <p>職業:<br><input type="text" name="occupation"></p>

      <button type="submit">登録</button>
    </form>

    <p><a href="/login">▶︎ すでに登録済みの方はこちら</a></p>
  </div>
{% endblock %}
